{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Личный кабинет |  Login </title>
  
    <!-- Bootstrap -->
    <link href="{% static "vendors/bootstrap/dist/css/bootstrap.min.css" %}" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="{% static "vendors/font-awesome/css/font-awesome.min.css" %}" rel="stylesheet">
    <!-- NProgress -->
    <link href="{% static "vendors/nprogress/nprogress.css" %}" rel="stylesheet">
    <!-- bootstrap-daterangepicker -->
    <link href="{% static "vendors/bootstrap-daterangepicker/daterangepicker.css" %}" rel="stylesheet">
    <!-- iCheck -->
    <link href="{% static "vendors/iCheck/skins/flat/green.css" %}" rel="stylesheet">
    <!-- bootstrap-progressbar -->
    <link href="{% static "vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css" %}" rel="stylesheet">
    <!-- JQVMap -->
    <link href="{% static "vendors/jqvmap/dist/jqvmap.min.css" %}" rel="stylesheet"/>
     
    <!-- Animate.css -->
    <link href="{% static "vendors/animate.css/animate.min.css" %}" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="{% static "build/css/custom.css" %}" rel="stylesheet">
    
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>

    
  </head>

<body class="login">
  <div>

    <div class="login_wrapper">

      {% if typeForm == "Login" or typeForm == "Logout" %}
      <div class="animate form login_form">
        <section id="loginContent" class="login_content">          
          <form id="formValidation" action="/access/auth/" method="post">{% csrf_token %}
            <h1><i class="fa fa-server"></i> Личный кабинет</h1>
            
            <div style="text-align: right; padding-bottom: 1em;">
              <a  style="font-size:1.1em;color:#337ab7; text-decoration:none;" href="/access/accountCreate/">Зарегестрироваться</a>
            </div>
            
    	    <div class="form-group has-feedback">
    	        <input class="form-control" placeholder="Email" type="email" name="username">
    	        <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
    	        <label id="username-error" class="error valid" for="username"></label>
	    </div>
    	    
    	    <div class="form-group has-feedback">
    	      <input class="form-control" placeholder="Password" type="password" name="password">
    	      <span class="glyphicon glyphicon-lock form-control-feedback"></span>
    	      <label id="password-error" class="error valid" for="password"></label>
    	    </div>
    	    
            <div>
              <button type="submit" class="btn btn-primary btn-block">Войти</button>
            </div>

            <div class="clearfix"></div>

            <div class="separator">
              <div class="clearfix"></div>
              <div>
                <p><strong>ООО "Пудлинк" <a href="http://pudlink.ru">http://pudlink.ru</a></strong></p>
              </div>
            </div>
          </form>
        </section>
      </div>
      {% endif %}

      {% if typeForm == "accountCreate" %}
      <div class="animate form login_form">
        <section id="loginContent" class="login_content">                    
          <form id="formValidation" action="/access/register/" method="post">{% csrf_token %}
            <h1><i class="fa fa-server"></i> Личный кабинет</h1>
    	    <div class="form-group has-feedback">
    	        <input class="form-control" placeholder="Email" type="email" name="username">
    	        <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
    	        <label id="username-error" class="error valid" for="username">{{ errorMsg }}</label>
	    </div>
    	    
    	    <div class="form-group has-feedback">
    	      <input class="form-control" placeholder="Password" type="password" name="password">
    	      <span class="glyphicon glyphicon-lock form-control-feedback"></span>
    	      <label id="password-error" class="error valid" for="password"></label>
    	    </div>            
            
            
            <div>
              <button type="submit" class="btn btn-primary btn-block">Зарегестрироваться</button>
            </div>

            <div class="clearfix"></div>

            <div class="separator">
              <div style="text-align: center; padding-bottom: 1em;">Аккаунт существет ?
                <a href="/access/login/" style="font-size:1.1em;color:#337ab7; text-decoration:none;"> Вход </a>
              </div>

              <div class="clearfix"></div>
              <br />

              <div>
                <h1><i class="fa fa-key"></i><strong> Pudlink LTD</h1>
                <p><strong>ООО "Пудлинк" <a href="http://pudlink.ru">http://pudlink.ru</a></strong></p>
              </div>
            </div>
          </form>
        </section>
      </div>
      {% endif %}          

      {% if typeForm == "Regform" %}
      <div id="step1" class="register_step1">
        <section class="login_content">
	<form id="formStep1">
            <h1><i class="fa fa-server"></i> Личный кабинет</h1>
            
            <div class="form-group">
              <div style="text-align:left;"><label>Тип аккаунта</label></div>
              <div class="radio" style="text-align:left;"><label><input type="radio" name="typeClient" value="1">физическое лицо</label></div>
              <div class="radio" style="text-align:left;"><label><input type="radio" name="typeClient" value="2">юридическое лицо</label></div>
              <div class="radio" style="text-align:left;"><label><input type="radio" name="typeClient" value="3">ИП</label></div>
              <div class="radio" style="text-align:left;"><label><input type="radio" name="typeClient" value="4">Гос.учреждение</label></div>
              <label style="text-align:left;" id="typeClient-error" for="typeClient"></label>
            </div>

            <div class="clearfix"></div>

            <div class="separator">
              <div class="checkbox" style="text-align:left;"><label><input type="checkbox">
              Я ознакомился(-ась) и согласен(-на) с условиями 
              <a href="#">Договора об оказании услуг связи</a>
              </label></div>
              
              <div class="clearfix"></div>
              
              <div class="checkbox" style="text-align:left;"><label><input type="checkbox">
              Я ознакомился(-ась) с Политикой в отношении обработки 
              и защиты персональных данных и даю свое Согласие на 
              обработку персональных данных в соответствии с 
              Законом "О персональных данных" №152-ФЗ от 27.07.2006 года
              </label></div>

	    </div>
	    
            <div>
              <button type="submit" class="btn btn-primary pull-right">Далее</button>
            </div>
	</form>
        </section>
      </div>	
      
      <div id="step2" class="register_step2 form">
        <section class="login_content">          	
	<form id="formStep2" class="form-horisontal">
            <h1><i class="fa fa-server"></i> Личный кабинет</h1>
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Email" required="" />
              <label id="username-error" class="error valid" for="username">{{ errorMsg }}</label>
              <input type="text" class="form-control" placeholder="Email" required="" />
              <label id="username-error" class="error valid" for="username">{{ errorMsg }}</label>
              <input type="text" class="form-control" placeholder="Email" required="" />
              <label id="username-error" class="error valid" for="username">{{ errorMsg }}</label>
    	      <input id="prevStep2" type="button" class="btn btn-default submit pull-left" value="Назад" />
    	      <input type="submit" class="btn btn-default submit pull-right" value="Далее" />
            </div>
	</form>
        </section>
      </div>	      
      
      <div id="step3" class="register_step3 form">
        <section class="login_content">          	
	<form id="formStep3" class="form-horisontal">
            <h1><i class="fa fa-server"></i> Личный кабинет</h1>
            <div class="form-group">
              <input type="email" class="form-control" placeholder="Email" required="" name="username" />
              <label id="username-error" class="error valid" for="username">{{ errorMsg }}</label>
            </div>
            <div>
              <input id="prevStep3" type="button" class="btn btn-default submit pull-left" value="Назад" />
              <input type="submit" class="btn btn-default submit pull-right" value="Готово" />
            </div>
	</form>
        </section>
      </div>
      
      <script>
      
    // pevBack
    $("#prevStep2").click(function() {
        $("#step1").css({ "display": "block"});
        $("#step2").css({ "display": "none"});
        $("#step3").css({ "display": "none"});
    });
      
    $("#prevStep3").click(function() {
        $("#step1").css({ "display": "none"});
        $("#step2").css({ "display": "block"});
        $("#step3").css({ "display": "none"});
    });
      
    // Валидация формы step1
    $( "#formStep1" ).validate({
      submitHandler: function(form) {
        $("#step1").css({ "display": "none"});
        $("#step2").css({ "display": "block"});
        $("#step3").css({ "display": "none"});
        },
      rules: {
        typeClient: "required"
        },
    });
    
    // Валидация формы step2
    $( "#formStep2" ).validate({
      submitHandler: function(form) {
        $("#step1").css({ "display": "none"});
        $("#step2").css({ "display": "none"});
        $("#step3").css({ "display": "block"});
        }
    });

      </script>
      {% endif %}

    </div>
    

    {% if typeForm == "Logout" %}
    <!-- Block logout -->  
    <div class="row">
      <div class="iframe-container">
        <iframe id="iframeId" style="display: none"></iframe>
      </div>
    </div>

  </div>

  <script>
    var iframeId = document.getElementById('iframeId');
    iframeId.src="https://support.pudlink.ru/logout.php";
    iframeId.onload = function() {
    iframeId.src="https://virtcloud.pudlink.ru/accounts/logout/";
      iframeId.onload = function() {
        window.history.pushState("","", '/access/login/');
        }
    }
  </script>
  <!--./Block logout -->
  {% endif %}


  <!-- Style for error messages elements -->
  <style type="text/css">
  #username-error, #password-error{
      color: #e34c4c;
      width: 100%;
      position: relative;
      top: -20px;
      font-weight: normal;
  }
  </style>
  <!--./Style-->

  <script>
    // Валидация форм
    jQuery.validator.setDefaults({
      debug: true,
      success: "valid"
    });

    // Валидация формы входа
    $( "#formValidation" ).validate({
      submitHandler: function(form) {
        form.submit();
        },
      rules: {
        username: {
          required: true,
          email: true
        },
        password: "required"
      },
      messages: {
        username: {
         required: "Введите адрес электронной почты",
         email: "Не правильный адрес эл. почты"
	},
	password: {
	 required: "Введите пароль"
	}
      }
    });
  </script>
</body>
</html>
